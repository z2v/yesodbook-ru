\documentclass[]{book}

\usepackage{fontspec}
\defaultfontfeatures{Mapping=tex-text}  % For archaic input (e.g. convert -- to en-dash)

\setmainfont{DejaVu Serif}
\setsansfont{DejaVu Sans}
\setmonofont{DejaVu Sans Mono}

\usepackage{polyglossia}
\setdefaultlanguage{russian}

\usepackage{listings}

\usepackage{graphicx}
% graphics path
\graphicspath{{../img/}}

% XeLaTeX tricks
\usepackage{xltxtra}

\usepackage{caption}
\usepackage{subcaption}

\usepackage{color}

% for JSON
\lstdefinelanguage{JavaScript}{
  keywords={typeof, new, true, false, catch, function, return, null, catch, switch, var, if, in, while, do, else, case, break},
  keywordstyle=\color{blue}\bfseries,
  ndkeywords={class, export, boolean, throw, implements, import, this},
  ndkeywordstyle=\color{darkgray}\bfseries,
  identifierstyle=\color{black},
  sensitive=false,
  comment=[l]{//},
  morecomment=[s]{/*}{*/},
  commentstyle=\color{purple}\ttfamily,
  stringstyle=\color{red}\ttfamily,
  morestring=[b]',
  morestring=[b]"
}

\lstdefinelanguage{CSS}{
  keywords={},
  keywordstyle=\color{blue}\bfseries,
  ndkeywords={@import, @media, @page, @font-face, @charset, @namespace},
  ndkeywordstyle=\color{darkgray}\bfseries,
  identifierstyle=\color{black},
  sensitive=false,
  morecomment=[s]{/*}{*/},
  commentstyle=\color{purple}\ttfamily,
  stringstyle=\color{red}\ttfamily,
  morestring=[b]',
  morestring=[b]"
}

% set listings default parameters
\lstset{language=Haskell,
        extendedchars=\true,
        keepspaces=true,
	inputencoding=utf8
}

\begin{document}

\input "S1. Basics.tex"
\input "S2. Advanced.tex"
\input "S3. Examples.tex"
\input "S4. Appendices.tex"

\end{document}
