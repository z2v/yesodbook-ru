\chapter{Введение}

С тех пор, как появилось программирование для веб, люди старались сделать процесс разработки более приятным. Мы постоянно применяли новые техники для борьбы со сложностью --- угрозами безопасности, отсутствием текущего состояния при использовании HTTP, необходимостью использовать множество языков программирования (HTML, CSS, Javascript) при создании мощных веб-приложений и тп.

Yesod пытается упростить процесс веб-разработки, играя на сильных сторонах языка программирования Haskell. Строгие проверки на этапе компиляции в языке Haskell затрагивают не только типы, а ссылочная прозрачность гарантирует, что мы не имеем ненамеренных побочных эффектов. Сопоставление с образцом алгебраических типов данных позволяет гарантировать, что мы предусмотрели все возможные случаи. Программируя на Haskell, мы избавляемся от целых классов ошибок.

К сожалению, использовать Haskell не достаточно. Всемирная паутина по своей природе не является типобезопасной. У нас даже нет элементарной возможности отличить строку от числа --- все данные в вебе передаются в виде простых последовательностей байт, сводя на нет все наши усилия относительно безопасности типов. Задача валидации входных данных полностью возложена на разработчика приложения. Я называю это пограничной проблемой --- поскольку ваше приложение является безопасным в отношении типов, любая граница с окружающим миром нуждается в <<дизинфекции>>.

\section{Безопасность типов}

Здесь в дело вступает Yesod. Используя высокоуровневые декларативные приемы, вы можете точно указать ожидаемые типы входных параметров. Да и сама обработка данных работает не так, как обычно --- используя типобезопасные URL, вы можете быть уверены в том, что выходные данные также сформированы правильно.

С пограничной проблемой имеет дело не только клиент, она также существует при сохранении и загрузки данных. И вновь, Yesod спасает нас от пограничных проблем, любезно производя сериализацию данных. Вы можете работать с высокоуровневым определением сущностей, оставаясь в блаженном неведении относительно деталей реализации.

\section{Выразительность}

Не секрет, что веб-приложения содержат массу шаблонного кода. Где это возможно, Yesod старается использовать особенности языка Haskell, чтобы уберечь ваши пальцы от лишней работы:

\begin{itemize}
  \item Библиотека для работы с формами в большинстве случаев уменьшает количество кода путем использования класса типов Applicative.
  \item Объявления маршрутов очень немногословны, но не в убыток безопасности типов.
  \item Код для сериализации и десериализации ваших данных генерируется автоматически.
\end{itemize}

В Yesod есть два вида кодогенерации. Для начала нового проекта предоставляется утилита, предназначенная для создания структуры файлов и каталогов. Тем не менее, большая часть кода генерируется на этапе компиляции благодаря механизму метапрограммирования. Таким образом, сгенерированный код никогда не устареет. Простое обновление библиотеки автоматически обновит весь сгенерированный код.

Но для тех, кто предпочитает сохранять контроль и точно знать, что делает написанный код, предусмотренна возможность оставаться ближе к компилятору и писать весь код самостоятельно.

\section{Производительность}

GHC, наиболее популярный компилятор языка Haskell, обладает потрясающими характеристиками производительности, и они постоянно улучшаются. Один только выбор языка программирования дал Yesod огромное преимущество в плане производительности по сравнению с альтернативами. Но одного языка не достаточно --- нам нужна архитектура, ориентированная на производительность.

Для примера рассмотрим подход к работе с шаблонами. Разрешив анализ HTML, CSS и JavaScript кода на этапе компиляции, Yesod не только избежал дорогостоящих операций ввода/вывода с диска, но и получил возможность оптимизировать рендеринг этого кода. Однако на этом архитектурные решения не заканчиваются. Благодаря тому, что лежащие в основе Yesod библиотеки используют такие продвинутые приемы, как каналы (conduits) и строители (builders), мы можем быть уверены в том, что наш код потребляет постоянное количество оперативной памяти, не используя при этом файловые дескрипторы и другие дорогостоящие ресурсы. Используя высокоуровевые абстракции, вы можете получить сильно сжатый и должным образом кэшируемый код на CSS и JavaScript.

Warp, флагманский веб-сервер Yesod, является быстрейшим веб-сервером на Haskell. Совместно используя эти две технологии, мы получаем одно из самых высокопроизводительных решений для создания веб-приложений.

\section{Модульность}

Yesod has spawned the creation of dozens of packages, most of which are usable in a context outside of Yesod itself. One of the goals of the project is to contribute back to the community as much as possible; as such, even if you are not planning on using Yesod in your next project, a large portion of this book may still be relevant for your needs.

Of course, these libraries have all been designed to integrate well together. Using the Yesod Framework should give you a strong feeling of consistency throughout the various APIs.

\section{Прочная кодовая база}

I remember once seeing a PHP framework advertising support for UTF-8. This struck me as surprising: you mean having UTF-8 support isn't automatic? In the Haskell world, issues like character encoding are already well addressed and fully supported. In fact, we usually have the opposite problem: there are a number of packages providing powerful and well-designed support for the problem. The Haskell community is constantly pushing the boundaries finding the cleanest, most efficient solutions for each challenge.

The downside of such a powerful ecosystem is the complexity of choice. By using Yesod, you will already have most of the tools chosen for you, and you can be guaranteed they work together. Of course, you always have the option of pulling in your own solution.

As a real-life example, Yesod and Hamlet (the default templating language) use blaze-builder for textual content generation. This choice was made because blaze provides the fastest interface for generating UTF-8 data. Anyone who wants to use one of the other great libraries out there, such as text, should have no problem dropping it in.

\section{Введение в Haskell}

Haskell является мощным, производительным, типобезопасным функциональным языком программирования. Эта книга написана в предположении, что вы уже знакомы с основами языка Haskell. Существует две прекрасные книги для изечения Haskell, притом обе доступны для чтения онлайн:

\begin{itemize}
  \item Learn You a Haskell for Great Good!
  \item Real World Haskell
\end{itemize}

Yesod опирается на несколько возможностей языка Haskell, которые не освещены в учебниках для начинающих. Несмотря на то, что от вас редко будет требоваться понимание того, как именно они работают, всегда лучше понимать, что делают используемые вами инстументы. Упомянутые возможности рассматриваются в следующей главе.

